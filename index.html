<!DOCTYPE html>
<html lang="en" style="height: 100%; width: 100%;">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>校园卡</title>
  <style>
    button {
      border: none;
    }

    button:focus {
      outline: none;
    }

    button:hover {
      border: none;
    }

    .main {
      height: 100%;
      width: 100%;
    }

    #passMain {
      background: #6ec874;
      display: block;
    }

    .pass-code {
      width: 100%;
    }

    #pass-dateTime {
      position: absolute;
      left: 39vw;
      top: 48.5vw;
      font-size: 4.5vw;
      color: transparent;

    }

    .pass-text {
      position: absolute;
      top: 18vw;
      font-size: 3.2vw;
      color: transparent;
      text-shadow: 0 0 0.8px #ffffff;
      font-weight: bold;
    }

    #pass-name {
      left: 14.4vw;
    }

    #pass-id {
      left: 60vw;
    }

    #enter-button {
      position: absolute;
      top: 133vw;
      left: 6vw;
      color: #00000000;
      background: #00000000;
      width: 40vw;
      height: 10vw;
    }


    #enterMain {
      background: #45cb6a;
    }

    .enter-text {
      position: absolute;
      left: 44.9vw;
      font-size: 3.2vw;
      color: black;
      /* text-shadow: 0 0 0.8px #444; */
      font-weight:normal;
    }

    #enter-name {
      bottom: 84.6vw
    }

    #enter-gender {
      bottom: 79.4vw;
    }

    #enter-id {
      bottom: 74.6vw;
    }

    #enter-xy {
      bottom: 65.9vw;
    }
    #enter-dy {
      bottom: 60.7vw;
    }
    #enter-sj {
      bottom: 56vw;
    }

    .enter-code {
      width: 100%;
      position: absolute;
      left: 0;
      bottom: 0;
    }

    #enter-state {
      position: absolute;
      width: 72vw;
      left: 50vw;
      transform: translateX(-50%);
      bottom: 180vw;
    }

    #enter-box {
      position: absolute;
      width: 40.5vw;
      bottom: 94.3vw;
      left: 50vw;
      transform: translateX(-50%);
    }

    #enter-img {
      position: absolute;
      height: 6.7vw;
      width: 6.7vw;
      left: 42.6vw;
      transform: translateX(-50%);
      bottom: 165.4vw;
      /* opacity: 0.5; */
      display: block;
    }

    #enter-title {
      position: absolute;
      color: black;
      left: 48.6vw;
      bottom: 162vw;
      /* opacity: 0.5; */
      font-size: 4vw;
      display: block;
      font-family:黑体;
      font-weight:bold;
    }

    .state-button {
      position: absolute;
      left: 50vw;
      transform: translateX(-50%);
      bottom: 180vw;
      width: 72vw;
      height: 10vw;
      color: #00000000;
      background: #00000000;
    }

    #enter-avatar {
      position: absolute;
      width: 33.5vw;
      bottom: 98.3vw;
      left: 50vw;
      transform: translateX(-50%);
    }

    #enter-dateTime {
      position: absolute;
      left: 50vw;
      bottom: 155.2vw;
      font-size: 4vw;
      transform: translateX(-50%);
      color: #34a853;
      font-weight:normal;
    }
  </style>
</head>

<body style="width: 100%; height: 100%; margin: 0;">
  <div class="main" id="enterMain">
    <!-- 出入校码页面 -->
    <img class="enter-code" src="./imgs/enterCode.jpg" />
    <img id="enter-state" src="./imgs/out.jpg" />
    <button class="state-button" onclick="state()"></button>
    <img id="enter-img" src="./imgs/buaa_logo.jpg" />
    <div id="enter-title">
      <p>出校码</p>
    </div>
    <img id="enter-box" src="./imgs/box.gif" />
    <img id="enter-avatar">
    <div id="enter-dateTime"></div>
    <div class="enter-text" id="enter-name"></div>
    <div class="enter-text" id="enter-gender"></div>
    <div class="enter-text" id="enter-id"></div>
    <div class="enter-text" id="enter-xy">
      <p>机械工程及自动化学院</p>
    </div>
    <div class="enter-text" id="enter-dy">
      <p>殷振朔</p>
    </div>
    <div class="enter-text" id="enter-sj">
      <p>18810919907</p>
    </div>

  </div>
  <script>
    var isIn = false;
    var today = new Date();
    var h = (today.getHours() < 10 ? '0' : '') + today.getHours();
    var m = (today.getMinutes() < 10 ? '0' : '') + today.getMinutes();
    var s = (today.getSeconds() < 10 ? '0' : '') + today.getSeconds();
    const scanTime = today.getFullYear() + "-" + (today.getMonth() + 1) + "-" + today.getDate() + " " + h+ ":" + m + ":" + s;
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const name = urlParams.get("n");
    const gender = urlParams.get("g");
    const id = urlParams.get("i");
    const avatar = urlParams.get("a");
    document.getElementById('enter-name').innerHTML = name;
    document.getElementById('enter-gender').innerHTML = gender;
    document.getElementById('enter-id').innerHTML = id;
    document.getElementById('enter-avatar').src = './imgs/avatar/' + avatar + '.jpg';
    function state() {
      isIn = !isIn;
      if (isIn) {
        document.getElementById('enter-state').src = './imgs/in.jpg';
        document.getElementById('enter-img').style.display = 'none';
      }
      else {
        document.getElementById('enter-state').src = './imgs/out.jpg';
        document.getElementById('enter-img').style.display = 'block';
      }
    }
    function dateTimeRefresh() {
      today = new Date();
      var date = today.getFullYear() + "年" + (today.getMonth() + 1) + "月" + today.getDate() + "日";
      var h = (today.getHours() < 10 ? '0' : '') + today.getHours();
      var m = (today.getMinutes() < 10 ? '0' : '') + today.getMinutes();
      var s = (today.getSeconds() < 10 ? '0' : '') + today.getSeconds();
      var time = h + ":" + m + ":" + s;
      let dateTime = date + " " + time;
      document.getElementById('enter-dateTime').innerHTML = dateTime
    }
    dateTimeRefresh();
    setInterval(dateTimeRefresh, 1000);
  </script>
</body>

</html>
